if (self.CavalryLogger) { CavalryLogger.start_js(["e8WJx"]); }

__d("AppUseTrackerLogger",["AsyncRequest","Env","PageTransitions","Run","isInIframe","pageID"],(function(a,b,c,d,e,f){var g;function h(){h.instance||(h.instance=this);return h.instance}Object.assign(h,{setup:function(a,b,c,d,e,f){new h().init(a,b,c,d,e,f)}});Object.assign(h.prototype,{instance:null,endpoint:"/ajax/apps/usage_update.php",heartbeat_endpoint:"/ajax/apps/heartbeat.php",INITIAL_PING:0,ONGOING_PING:1,DISCOVERY_PING:2,ENDING_PING:3,_application_id:0,_is_game:0,_createRequest:function(a){return new(b("AsyncRequest"))().setURI(this.endpoint).setMethod("POST").setData({app:this._application_id,is_game:this._is_game,type:a,condition:this._signal_on_page_transition})},_createHeartbeatRequest:function(){return new(b("AsyncRequest"))().setURI(this.heartbeat_endpoint).setMethod("POST").setData({app:this._application_id,page_id:b("pageID")})},init:function(a,c,d,e,f,h){var i=this;if(b("isInIframe")()&&!(g||(g=b("Env"))).isCQuick)return;this.cleanup();b("PageTransitions").registerHandler(this.catchPageTransition.bind(this));this._application_id=a;this._is_game=c;if(h){a=function(){return i._createHeartbeatRequest().send()};a();this._timers.push(setInterval(a,h))}this._timers.push(setTimeout(function(){this._createRequest(this.INITIAL_PING).send();var a=this._createRequest(this.ONGOING_PING);this._timers.push(setInterval(a.send.bind(a),e))}.bind(this),d));f&&this._timers.push(setTimeout(function(){this._createRequest(this.DISCOVERY_PING).send()}.bind(this),f));b("Run").onBeforeUnload(this.onBeforeUnload.bind(this))},catchPageTransition:function(a){this._createRequest(this.ENDING_PING).send(),this.cleanup()},onBeforeUnload:function(){this._createRequest(this.ENDING_PING).send(),this.cleanup()},cleanup:function(){if(this._timers)for(var a=0;a<this._timers.length;a++)clearInterval(this._timers[a]);this._timers=[]}});e.exports=h}),null);
__d("CanvasRHCHeightController.react",["DOMQuery","React","prop-types"],(function(a,b,c,d,e,f){var g=b("React");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("DOMQuery").find(document,"#contentArea"),c=0;this.props.rhc.scrollHeight<a.scrollHeight&&(c=a.scrollHeight-this.props.rhc.scrollHeight);a={height:c+"px"};return g.jsx("div",{style:a})};return c}(g.Component);a.propTypes={rhc:b("prop-types").object};e.exports=a}),null);
__d("getNormalizedClientRect",["getDocumentScrollElement"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.getBoundingClientRect(),d=0,e=0;a=b("getDocumentScrollElement")(a.ownerDocument);var f=a.getBoundingClientRect();if(f.left>0)d=-f.left;else{a=a.scrollWidth+f.left;var g=f.width;g>a&&(d=g-a)}f.top>0&&(e=-f.top);return{bottom:c.bottom+e,height:c.height,left:c.left+d,right:c.right+d,top:c.top+e,width:c.width}}e.exports=a}),null);
__d("StickyArea",["cx","CSS","DOM","DOMQuery","Event","Run","Style","ViewportBounds","getNormalizedClientRect","getOverlayZIndex","getStyleProperty","removeFromArray","throttle"],(function(a,b,c,d,e,f,g){var h=[],i=null,j=null,k=b("throttle").acrossTransitions(n,1e3),l="$$StickyArea_scrollListener",m="$$StickyArea_scrollListenerCount";function n(){h.sort(function(a,b){a=a.getNode();b=b.getNode();if(a.compareDocumentPosition)return 3-(a.compareDocumentPosition(b)&6);else return a.sourceIndex-b.sourceIndex})}function o(a,c,d){var e=a.getPlaceholder(),f=a.getNode(),g=b("Style").get(f,"float");a=a.getData();(a.placeholderWidth!==c||a.placeholderHeight!==d||a.placeholderFloat!==g)&&(b("Style").apply(e,{"float":g,height:d+"px",width:c+"px"}),a.placeholderHeight=d,a.placeholderWidth=c);f.nextSibling!==e&&b("DOM").insertAfter(f,e)}function p(a,c){var d=a.getData();d.fixed!==c&&(b("Style").apply(a.getNode(),d.styles),b("CSS").conditionShow(a.getPlaceholder(),c),b("CSS").conditionClass(a.getNode(),"_1a1e",c),b("Event").fire(a.getNode(),"change"),d.fixed=c)}function q(a,b){if(!a)return 0;else if(b.right<=a.rect.left||b.left>=a.rect.right)return q(a.prev,b);else return a.bottom}function r(){var a=0,c=h.length,d=100,e=null;function f(g,i){var j=d;while(a<c){var k=h[a],l=k.getNode(),m=k._scrollTarget;if(i&&!b("DOMQuery").contains(i,l))break;d=Math.max(j,k.getZIndex());var n=k.getData(),r=l.parentNode,s=n.styles;if(r==null){a++;continue}for(var t in s)s[t]="";p(k,!1);var u=l.offsetHeight,v=parseFloat(b("getStyleProperty")(l,"width"))||l.offsetWidth,w=m!==window?m.getBoundingClientRect().top:0,x=b("getNormalizedClientRect")(l);m=q(g||(m===window?e:null),x)+k.getOffset();var y=x.top-w;if(y<=m){s.width=v+"px";y=parseInt(b("Style").get(r,"padding-bottom"),10);var z=b("getNormalizedClientRect")(r);if(z.bottom-y>m+u||!k.getIsBoundToContainer()){var A=parseInt(b("Style").get(l,"margin-left"),10);s.position="fixed";s.bottom="auto";s.top=m+w+"px";s.left=x.left-A+"px"}else{(!n.parent||r!==n.parent)&&(b("Style").get(r,"position")==="static"&&b("Style").set(r,"position","relative"),n.parent=r);s.position="absolute";s.top="auto";s.bottom=y+"px";w=parseInt(b("Style").get(r,"border-left-width"),10);s.left=x.left-z.left-w+"px"}o(k,v,u);p(k,!0)}a++;A={bottom:m+u,prev:g,rect:x};n=0;k.getIsBoundToContainer()||(e=A,n=100);f(A,r);y=k.getZIndexOverride()||d+++n;b("Style").set(l,"z-index",y)}}f(null,null)}a=function(){"use strict";function a(c,d,e,f){f===void 0&&(f={}),this._isDestroyed=!1,this._node=c,this._data={fixed:!1,placeholderFloat:null,placeholderHeight:null,placeholderWidth:null,styles:{}},this._offset=e,this._boundToContainer=f.boundToContainer!==!1,f.stickTo===a.stickTo.SCROLL_PARENT?this._scrollTarget=b("Style").getScrollParent(c.parentNode)||window:this._scrollTarget=window,this._zIndexOverride=f.zIndexOverride,b("CSS").addClass(c,"_k"),d||b("Run").onLeave(this.destroy.bind(this)),!this._scrollTarget[l]?(this._scrollTarget[l]=b("Event").listen(this._scrollTarget,"scroll",function(){k(),r()}),this._scrollTarget[m]=1):this._scrollTarget[m]++,h.length||(i=b("Event").listen(window,"resize",function(){k(),r()}),j=b("ViewportBounds").subscribe("change",function(){k(),r()})),h.push(this),a.reflow()}var c=a.prototype;c.destroy=function(){if(this._isDestroyed)return;b("removeFromArray")(h,this);this._scrollTarget[m]--;this._scrollTarget[m]===0&&(this._scrollTarget[l].remove(),this._scrollTarget[l]=null);h.length||(i.remove(),i=null,j.unsubscribe(),j=null);this._placeholder&&b("DOM").remove(this._placeholder);var a=0;for(var c in this._data.styles)this._data.styles[c]="",a++;a&&b("Style").apply(this._node,this._data.styles);this._isDestroyed=!0};c.getData=function(){return this._data};c.getNode=function(){return this._node};c.getOffset=function(){return this._offset||0};c.getPlaceholder=function(){this._placeholder||(this._placeholder=b("DOM").create("div"));return this._placeholder};c.getIsBoundToContainer=function(){return this._boundToContainer};c.getZIndexOverride=function(){return this._zIndexOverride};c.getZIndex=function(){this._zIndex||(this._zIndex=b("getOverlayZIndex")(this._node));return this._zIndex};c.setOffset=function(a){this._offset=a};return a}();a.reflow=b("throttle").acrossTransitions(function(){n(),r()},100);a.stickTo={SCROLL_PARENT:"SCROLL_PARENT",WINDOW:"WINDOW"};e.exports=a}),null);
__d("StickyArea.react",["cx","React","ReactDOM","StickyArea","joinClasses"],(function(a,b,c,d,e,f,g){var h=b("React");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){this.$1=new(b("StickyArea"))(b("ReactDOM").findDOMNode(this),!0,this.props.offset||0,{boundToContainer:this.props.boundToContainer,stickTo:this.props.stickTo,zIndexOverride:this.props.zIndexOverride})};d.componentDidUpdate=function(a){this.props.offset!==a.offset&&this.$1.setOffset(this.props.offset),b("StickyArea").reflow()};d.componentWillUnmount=function(){this.$1.destroy(),this.$1=null};d.setOffset=function(a){this.$1.setOffset(a)};d.render=function(){return h.jsx("div",babelHelpers["extends"]({},this.props,{className:b("joinClasses")(this.props.className,"_k _77by"),ref:"root",children:this.props.children}))};return c}(h.Component);a.stickTo=b("StickyArea").stickTo;a.defaultProps={boundToContainer:!0,stickTo:b("StickyArea").stickTo.WINDOW};e.exports=a}),null);
__d("XGamerGraphMarkUserPlaysFBAppController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/gamer-graph/mark-user-plays-fb-app/",{})}),null);
__d("GamerGraphMarkUserPlaysFBApp",["AsyncRequest","XGamerGraphMarkUserPlaysFBAppController"],(function(a,b,c,d,e,f){"use strict";e.exports.mark=function(a){var c=b("XGamerGraphMarkUserPlaysFBAppController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setData({app_id:a}).send()}}),null);
__d("GiftCredits",["AsyncRequest","Dialog","URI"],(function(a,b,c,d,e,f){var g,h={dialog:null,callback:null,purchaseLock:!1,purchaseLockExpiryThreshold:5e3,purchaseLockTimeoutId:null,getPurchaseCreditPrompt:function(a,b,c,d){h.main(a,null,null,null,c,null,null,null,"BuyCredits",{},d)},redeemGiftcard:function(a,c,d){var e=new(g||(g=b("URI")))(document.location).setPath("/giftcards").toString();h.main(a,null,null,e,null,null,null,null,c,{},d)},getPrompt:function(a,b,c,d,e,f,g,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){h.main(a,b,c,d,e,f,g,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y)},main:function(a,c,d,e,f,g,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){if(h.isPurchaseLocked())return!1;h.setPurchaseLock(!0);g={_path:"pay",method:"pay",display:"async",app_id:a,receiver:c,api_key:i,credits_purchase:p,action:k,next:e,dev_purchase_params:JSON.stringify(l),additional_params:JSON.stringify(m),order_info:JSON.stringify(d),product:n,package_id:o,request_id:q,sdk:r,quantity:s,quantity_min:t,quantity_max:u,test_currency:v,pricepoint_id:w,user:x,user_hash:y,ingame_gift_data:z};j=new(b("AsyncRequest"))().setURI("/fbml/ajax/dialog/").setData(g).setMethod("GET").setReadOnly(!0).setStatusElement("commerce_get_more_loading");h.callback=f;h.dialog=new(b("Dialog"))().setAsync(j).setModal(!0).setCloseHandler(function(a){h.setPurchaseLock(!1),f(a)}).show()},isPurchaseLocked:function(){return h.purchaseLock},setPurchaseLock:function(a){h.purchaseLock=a;a?h.purchaseLockTimeoutId=setTimeout(function(){h.setPurchaseLock(!1)},h.purchaseLockExpiryThreshold):clearTimeout(h.purchaseLockTimeoutId);return!0}};e.exports=h}),null);
__d("legacy:giftcredits",["GiftCredits"],(function(a,b,c,d,e,f){a.GiftCredits=b("GiftCredits")}),3);
__d("CanvasActivityLogger",["requireCond","Banzai","cr:1187159","cr:1187160","Event","ScriptPath","Visibility","clickRefAction","getActiveElement","gkx","setIntervalAcrossTransitions"],(function(a,b,c,d,e,f){var g=1e3,h=!1,i=!1,j=!1,k=!1,l=null,m=null,n=null,o=0,p=0,q=0,r={5:"five_seconds",10:"ten_seconds",30:"thirty_seconds",60:"one_minute",120:"two_minutes",300:"five_minutes"},s={CANVAS_ACTIVE:"active",CANVAS_INACTIVE:"inactive"},t=s.CANVAS_INACTIVE;function u(){return k&&j&&(h||i)}function v(a){b("cr:1187159")!=null&&(b("cr:1187160")==null?void 0:b("cr:1187160").isCQuick)&&b("cr:1187159").sendMessage({appID:q,compatAction:"log_canvas_app_time_spent",currentTime:Date.now(),lastOpenTime:a})}function w(){if(t==s.CANVAS_ACTIVE&&!u()){t=s.CANVAS_INACTIVE;var a=Date.now()-m;b("ScriptPath").closeOverlayView("canvas",m?{ms_since_open:a}:null);m&&v(m);p+=a;for(var c in r)if(Object.prototype.hasOwnProperty.call(r,c)&&p>c*g){var d=r[c];b("Banzai").post("canvas_playing_game",{played:d,app_id:q});delete r[c]}if(Date.now()-n>60*g){d=a+o;b("Banzai").post("canvas_time_spent",[d,q]);n=Date.now();o=0}else o=m?a+o:o}else t==s.CANVAS_INACTIVE&&u()&&(t=s.CANVAS_ACTIVE,m=Date.now(),n||(n=Date.now()),b("ScriptPath").openOverlayView("canvas"))}b("Banzai").subscribe(b("Banzai").SHUTDOWN,function(){u()&&(m&&v(m),b("ScriptPath").closeOverlayView("canvas",m?{ms_since_open:Date.now()-m}:null))});function x(a){b("clickRefAction")("canvas",l,a,"FORCE").set_namespace("canvas");switch(a.type){case"beforeunload":k=!1;h=!1;i=!1;break;case"visible":k=!0;break;case"hidden":k=!1;break;case"mouseover":i=!0;break;case"mouseout":i=!1;break;case"focus":case"blur":h=b("getActiveElement")()==document.getElementById("iframe_canvas");break;default:break}w()}function y(a){var b=document.createEvent("FocusEvent");b.initEvent(a,!0,!0);return b}a={trackState:function(a,c){var d=b("cr:1187159")!=null&&(b("cr:1187160")==null?void 0:b("cr:1187160").isCQuick)&&b("gkx")("1221045");b("cr:1187159")&&(b("cr:1187159").init(),d&&(b("cr:1187159").register("document_focus_change",function(a){a=b("cr:1187159").getMessageEventString(a,"focused");j=a==="true";w()}),b("cr:1187159").sendMessage({compatAction:"subscribe_document_focus_change"})));q=c;k=!b("Visibility").isHidden();j=document.hasFocus();h=b("getActiveElement")()==document.getElementById("iframe_canvas");i=a.querySelector(":hover")!==null;w();b("Event").listen(a,"mouseover",x);b("Event").listen(a,"mouseout",x);b("Event").listen(window,"blur",x);b("Event").listen(window,"focus",x);b("Event").listen(window,"beforeunload",x);b("Visibility").addListener("hidden",function(){return x(y("hidden"))});b("Visibility").addListener("visible",function(){return x(y("visible"))});var e=b("cr:1187160")==null?void 0:b("cr:1187160").isCQuick;b("setIntervalAcrossTransitions")(function(){d||(j=document.hasFocus()),e&&(h=b("getActiveElement")()==document.getElementById("iframe_canvas")),w()},g)}};e.exports=a}),null);
__d("CanvasResizer",["CSS","DOMEventListener","Vector","createArrayFromMixed"],(function(a,b,c,d,e,f){var g;function h(){var a,c=document.documentElement;window.innerHeight?a=window.innerHeight:c&&c.clientHeight?a=c.clientHeight:a=document.body.clientHeight;for(var c=0;c<g.length;c++){var d=g[c];if(!b("CSS").hasClass(d,"noresize")){var e=b("Vector").getElementPosition(d,"document").y;e=a-e;d.style.height=e/(g.length-c)+"px"}}}b("DOMEventListener").add(window,"resize",h);a={smartSizingFrameAdded:function(){g=[];var a=b("createArrayFromMixed")(document.getElementsByTagName("iframe"));a.forEach(function(a){b("CSS").hasClass(a,"smart_sizing_iframe")&&!b("CSS").hasClass(a,"noresize")&&(b("CSS").removeClass(a,"canvas_iframe_util"),g.push(a))});h()}};e.exports=a}),null);
__d("DialogUtils",["Event"],(function(a,b,c,d,e,f){a={showDialogOnClickTruthyReturn:function(a,c){b("Event").listen(a,"click",function(){c.show();return!0})},showDialogOnClick:function(a,c){b("Event").listen(a,"click",function(){c.show();return!1})}};e.exports=a}),null);